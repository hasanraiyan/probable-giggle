<%- include('partials/header', { title: 'Log Details' }) %>

<div class="mb-6">
  <a href="/" class="text-blue-600 hover:underline">&larr; Back to Dashboard</a>
</div>

<div class="bg-white p-6 rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold mb-2">Log History for:</h2>
  <p class="mb-4 text-gray-600 text-lg break-all"><a href="<%= site.url %>" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline"><%= site.url %></a></p>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white">
      <thead class="bg-gray-200">
        <tr>
          <th class="py-3 px-4 text-left font-semibold text-gray-700">Status</th>
          <th class="py-3 px-4 text-left font-semibold text-gray-700">Response Time</th>
          <th class="py-3 px-4 text-left font-semibold text-gray-700">Details</th>
          <th class="py-3 px-4 text-left font-semibold text-gray-700">Checked At</th>
        </tr>
      </thead>
      <tbody>
        <% if (logs.length > 0) { %>
          <% logs.forEach(log => { %>
            <tr class="border-b hover:bg-gray-50">
              <td class="py-3 px-4">
                <% if (log.status === 'UP') { %>
                  <span class="bg-green-500 text-white text-xs font-semibold px-2.5 py-0.5 rounded-full">UP</span>
                <% } else { %>
                  <span class="bg-red-500 text-white text-xs font-semibold px-2.5 py-0.5 rounded-full">DOWN</span>
                <% } %>
              </td>
              <td class="py-3 px-4"><%= log.response_time !== null ? `${log.response_time} ms` : 'N/A' %></td>
              <td class="py-3 px-4 text-sm text-gray-600"><%= log.details %></td>
              <td class="py-3 px-4"><%= new Date(log.checked_at).toLocaleString() %></td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="4" class="py-4 px-4 text-center text-gray-500">No logs found for this site yet. The first check should run shortly.</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<%- include('partials/footer') %>
